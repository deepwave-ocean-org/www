init_masonry=function(){var e=document.querySelector(".masonry-grid"),o=new Masonry(e,{itemSelector:".masonry-item",percentPosition:!0,columnWidth:".masonry-item",gutter:24});function t(){const n=document.querySelectorAll(".masonry-item"),t=e.offsetWidth/2;n.forEach(e=>{const s=e.getBoundingClientRect(),n=e.querySelector(".timeline-dot"),o=s.left+s.width/2,i=o<t;console.log("Item center X:",o,"Center X:",t,"Is on left:",i),i?(n.style.right="calc(-2.5 * 4px - 2%)",n.style.left="auto",n.style.top="24px",n.style.opacity="1"):(n.style.left="calc(-2.5 * 4px - 2%)",n.style.right="auto",n.style.top="24px",n.style.opacity="1")})}t(),imagesLoaded(e).on("always",function(){o.layout(),setTimeout(t,500)});const n=document.querySelectorAll(".timeline-card");n.forEach(e=>{e.classList.add("animation-ready")});const s=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),s.unobserve(e.target))})},{threshold:.15,rootMargin:"0px 0px -50px 0px"});n.forEach(e=>{s.observe(e)})},document.addEventListener("DOMContentLoaded",function(){init_masonry()}),document.body.addEventListener("htmx:afterSwap",function(){console.log("htmx:afterSwap event triggered"),init_masonry()})